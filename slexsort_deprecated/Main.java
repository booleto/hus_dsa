import java.util.*;public class Main{static Scanner s;public static void main(String[]args){s=new Scanner(System.in);int t=s.nextInt();s();for(int i=0;i<t;i++){HashMap<Character,Integer>d=new HashMap<Character,Integer>();String ds=s();for(int j=0;j<ds.length();j++){d.put(ds.charAt(j),j);}int ln=s.nextInt();s();ArrayList<String>l=new ArrayList<String>();while(l.size()<ln){l.add(s());}Collections.sort(l,new Comparator<String>(){public int compare(String x,String y){for(int i=0;i<Math.min(x.length(),y.length());i++){int t=d.get(x.charAt(i))-d.get(y.charAt(i));if(t==0){continue;}return t;}return x.length()-y.length();}});for(String s:l){System.out.println(s);}System.out.println();s();}}static String s(){return s.nextLine();}}